{% extends 'base.html' %}

{% block title %}Government Services Portal{% endblock %}

{% block head %}
<link rel="stylesheet" href="{{ url_for('static', filename='styles/index.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='styles/cards.css') }}">
<link rel="stylesheet" href="{{ url_for('static', filename='styles/search.css') }}">
{% if get_locale() == 'ar' %}
    <link rel="stylesheet" href="{{ url_for('static', filename='styles/arabic.css') }}">
{% endif %}
{% endblock %}

{% block body %}
<p class="header-description">{{ _('WelcomeMessage') }}</p>

<div class="search-container" {% if not search_query %} style="margin-top: 140px; margin-bottom: 35px;" {% endif %}>
    <h2 class="search-title">{{ _('SearchIn')}} {{ total_department }} {{ _('DepartmentsAnd')}} {{ total_services }} {{ _('Service')}}</h2>
    <form action="{{ url_for('search') }}" method="get" class="search-form">
        <div class="searchBox">
            <input type="text" name="item" value="{% if request.args.get('item') %}{{ request.args.get('item') }}{% else %}all{% endif %}" hidden>
            <input type="text" name="query" placeholder="{{ _('SearchPlaceholder') }}" class="searchInput">
            <button type="submit" class="searchButton">
                <svg xmlns="http://www.w3.org/2000/svg" width="24" height="24" viewBox="0 0 256 256">
                    <path fill="currentColor" d="M232.49 215.51L185 168a92.12 92.12 0 1 0-17 17l47.53 47.54a12 12 0 0 0 17-17ZM44 112a68 68 0 1 1 68 68a68.07 68.07 0 0 1-68-68"/>
                </svg>
            </button>
        </div>
    </form>
</div>

<div class="steps-container">
    <div class="item">
        <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">
            <path fill="currentColor" d="M17.55 11.288L14.712 8.45l.713-.688l2.125 2.125l4.25-4.25l.708.713zM9 11.385q-1.246 0-2.123-.877Q6 9.63 6 8.385q0-1.247.877-2.123q.877-.877 2.123-.877q1.246 0 2.123.877q.877.876.877 2.123q0 1.246-.877 2.123q-.877.877-2.123.877m-7 7.23V16.97q0-.619.36-1.158q.361-.54.97-.838q1.416-.679 2.833-1.018q1.418-.34 2.837-.34q1.42 0 2.837.34q1.417.34 2.832 1.018q.61.298.97.838q.361.539.361 1.158v1.646z"/>
        </svg>
        <div class="text">
            <b>{{ _('NewSignUp') }}</b>
            <br>
            {{ _('NewSignUpDescription') }}
        </div>
    </div>
    
    <div class="arrow">
        <svg width="141" height="18" viewBox="0 0 141 18" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M141 15.5019L133.529 6.69748L129.64 17.5697L141 15.5019ZM1.32869 16.4463C1.80648 16.28 2.28241 16.1151 2.7565 15.9517L2.10473 14.0609C1.6287 14.225 1.15086 14.3905 0.671185 14.5575L1.32869 16.4463ZM5.57923 14.9886C6.53299 14.6666 7.47933 14.3506 8.41851 14.0407L7.79179 12.1414C6.84814 12.4528 5.89745 12.7702 4.93948 13.0937L5.57923 14.9886ZM11.2433 13.12C12.2039 12.8108 13.1571 12.5081 14.1031 12.2119L13.5056 10.3033C12.5543 10.6011 11.5961 10.9054 10.6305 11.2161L11.2433 13.12ZM16.9438 11.3357C17.9067 11.0432 18.8622 10.7576 19.8106 10.479L19.247 8.56011C18.2925 8.84049 17.3311 9.12778 16.3625 9.42199L16.9438 11.3357ZM22.6773 9.65211C23.6389 9.37988 24.5935 9.11497 25.5413 8.85738L25.0168 6.92739C24.0621 7.18686 23.1007 7.45364 22.1325 7.72773L22.6773 9.65211ZM28.4344 8.08847C29.4027 7.83706 30.364 7.59349 31.3189 7.35777L30.8396 5.41606C29.8767 5.65375 28.9076 5.89929 27.9318 6.15267L28.4344 8.08847ZM34.2147 6.66236C35.1919 6.43437 36.1625 6.2148 37.1271 6.00363L36.6993 4.04991C35.7257 4.26306 34.7462 4.48465 33.7602 4.71467L34.2147 6.66236ZM40.0361 5.38852C41.0154 5.18889 41.9887 4.99814 42.9564 4.81625L42.587 2.85066C41.6091 3.03448 40.6258 3.22719 39.6366 3.42882L40.0361 5.38852ZM45.8919 4.28882C46.8754 4.12036 47.8536 3.96126 48.8269 3.81148L48.5227 1.83475C47.538 1.98627 46.5487 2.1472 45.5543 2.31752L45.8919 4.28882ZM51.7655 3.38564C52.7556 3.25117 53.7411 3.12652 54.7226 3.01168L54.4901 1.02523C53.4962 1.14153 52.4985 1.26773 51.4964 1.40384L51.7655 3.38564ZM57.6797 2.69419C58.6693 2.59757 59.6555 2.51106 60.6386 2.43464L60.4836 0.440655C59.4872 0.518103 58.488 0.605768 57.4853 0.703656L57.6797 2.69419ZM63.6042 2.23424C64.5967 2.17731 65.5867 2.13077 66.5749 2.0946L66.5017 0.0959389C65.4997 0.132616 64.4958 0.179806 63.4896 0.237519L63.6042 2.23424ZM69.5452 2.01702C70.5365 2.00156 71.5266 1.99659 72.516 2.00209L72.5271 0.00211763C71.5235 -0.00346196 70.5194 0.00158417 69.514 0.0172675L69.5452 2.01702ZM75.4877 2.05013C76.4772 2.07662 77.4667 2.11359 78.4568 2.16103L78.5525 0.163319C77.5484 0.115211 76.5448 0.0777159 75.5413 0.0508469L75.4877 2.05013ZM81.4231 2.33428C82.4098 2.40223 83.3978 2.48053 84.3876 2.56917L84.566 0.57714C83.5626 0.487288 82.561 0.407905 81.5605 0.339004L81.4231 2.33428ZM87.3459 2.86418C88.3265 2.97187 89.3094 3.08962 90.2954 3.21742L90.5525 1.23401C89.5538 1.10456 88.5579 0.985264 87.5642 0.876132L87.3459 2.86418ZM93.2411 3.62766C94.2186 3.77316 95.1995 3.92839 96.1846 4.09336L96.5149 2.12083C95.5181 1.95389 94.5252 1.79676 93.5355 1.64946L93.2411 3.62766ZM99.1105 4.60969C100.079 4.7892 101.052 4.97796 102.03 5.17596L102.427 3.21575C101.438 3.0156 100.455 2.82474 99.475 2.64318L99.1105 4.60969ZM104.947 5.79093C105.91 6.00174 106.878 6.22133 107.852 6.4497L108.309 4.50254C107.326 4.27196 106.348 4.05018 105.375 3.8372L104.947 5.79093ZM110.742 7.14894C111.699 7.38773 112.663 7.6348 113.633 7.89016L114.142 5.9561C113.164 5.69856 112.192 5.4493 111.225 5.20834L110.742 7.14894ZM116.512 8.66748C117.459 8.92957 118.413 9.19937 119.374 9.47687L119.929 7.55546C118.961 7.27589 118 7.00401 117.045 6.73983L116.512 8.66748ZM122.243 10.3226C123.185 10.606 124.134 10.8966 125.09 11.1944L125.685 9.28487C124.723 8.98516 123.767 8.69264 122.818 8.40732L122.243 10.3226ZM127.932 12.0941C128.875 12.3976 129.825 12.7078 130.782 13.0249L131.411 11.1263C130.449 10.8075 129.493 10.4954 128.544 10.1902L127.932 12.0941ZM133.597 13.9698C134.534 14.2884 135.478 14.6133 136.429 14.9446L137.087 13.0559C136.131 12.723 135.183 12.3965 134.241 12.0763L133.597 13.9698Z" fill="currentColor"/>
        </svg>
    </div>
    
    <div class="item">
        <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">
            <path fill="currentColor" d="m8.925 10.123l2.206-2.186q.129-.13.304-.13t.303.13q.149.128.139.313q-.01.185-.139.313l-2.223 2.23q-.242.242-.565.232q-.323-.01-.565-.233L7.262 9.713q-.149-.123-.149-.3q0-.178.149-.326q.148-.149.313-.149t.313.149zm.613 5.108q-2.398 0-4.064-1.667T3.808 9.5q0-2.398 1.666-4.064t4.064-1.667q2.399 0 4.065 1.667q1.666 1.666 1.666 4.064q0 1.042-.369 2.017q-.37.975-.97 1.668l5.908 5.907q.14.14.15.345q.01.203-.15.363q-.16.16-.353.16q-.195 0-.354-.16l-5.908-5.908q-.75.639-1.725.989q-.975.35-1.96.35m0-1q1.99 0 3.361-1.37q1.37-1.37 1.37-3.361q0-1.99-1.37-3.36q-1.37-1.37-3.36-1.37q-1.99 0-3.361 1.37q-1.37 1.37-1.37 3.36q0 1.99 1.37 3.36q1.37 1.37 3.36 1.37"/>
        </svg>
        <div class="text">
            <b>{{ _('ExploreAllServices') }}</b>
            <br>
            {{ _('ExploreAllServicesDescription') }}
        </div>
    </div>

    <div class="arrow">
        <svg width="147" height="17" viewBox="0 0 147 17" fill="none" xmlns="http://www.w3.org/2000/svg">
            <path d="M147 3L139.139 11.4581L135.745 0.42125L147 3ZM1.28661 2.04197C1.76855 2.18618 2.24867 2.32917 2.727 2.47095L2.15863 4.38849C1.67862 4.24622 1.19684 4.10273 0.71327 3.95803L1.28661 2.04197ZM5.57573 3.30704C6.53607 3.58603 7.4892 3.85999 8.43538 4.12891L7.88861 6.05272C6.93859 5.78271 5.98172 5.50768 5.01776 5.22763L5.57573 3.30704ZM11.2864 4.92975C12.2518 5.19764 13.21 5.46014 14.1612 5.71725L13.6393 7.64797C12.6837 7.38966 11.7212 7.12598 10.7516 6.85692L11.2864 4.92975ZM17.0128 6.47727C17.9838 6.73232 18.9476 6.98159 19.9046 7.22509L19.4114 9.16332C18.4493 8.91852 17.4805 8.66797 16.5047 8.41165L17.0128 6.47727ZM22.7764 7.94353C23.7463 8.1819 24.7091 8.41418 25.6654 8.64038L25.205 10.5867C24.243 10.3591 23.2744 10.1255 22.2991 9.88572L22.7764 7.94353ZM28.5585 9.31067C29.5266 9.53019 30.4882 9.74332 31.4435 9.95005L31.0204 11.9048C30.0586 11.6967 29.0906 11.4821 28.1162 11.2612L28.5585 9.31067ZM34.3576 10.5648C35.3318 10.7649 36.2997 10.9582 37.2615 11.1447L36.8809 13.1081C35.9116 12.9202 34.9365 12.7255 33.9552 12.5239L34.3576 10.5648ZM40.1732 11.6916C41.1542 11.8699 42.1292 12.0409 43.0987 12.2046L42.7656 14.1767C41.7878 14.0115 40.8046 13.8391 39.8156 13.6594L40.1732 11.6916ZM46.0189 12.6785C47.001 12.8313 47.9779 12.9766 48.9499 13.1142L48.6695 15.0944C47.6883 14.9555 46.7024 14.8089 45.7114 14.6548L46.0189 12.6785ZM51.8896 13.5093C52.8731 13.6343 53.852 13.7513 54.8268 13.8606L54.6042 15.8481C53.6194 15.7378 52.6307 15.6195 51.6375 15.4933L51.8896 13.5093ZM57.771 14.1676C58.7588 14.2629 59.7428 14.35 60.7235 14.4289L60.5631 16.4225C59.5717 16.3427 58.5771 16.2547 57.579 16.1584L57.771 14.1676ZM63.6745 14.6422C64.6613 14.7054 65.6453 14.7602 66.627 14.8067L66.5325 16.8044C65.5396 16.7575 64.5445 16.702 63.5467 16.6381L63.6745 14.6422ZM69.5872 14.9215C70.5748 14.9514 71.5607 14.9728 72.5455 14.9856L72.5194 16.9854C71.5232 16.9724 70.5258 16.9508 69.5267 16.9206L69.5872 14.9215ZM75.5037 14.9985C76.4906 14.9942 77.4769 14.9814 78.4631 14.96L78.5065 16.9595C77.5087 16.9812 76.5108 16.9942 75.5124 16.9985L75.5037 14.9985ZM81.4203 14.8701C82.4049 14.8317 83.39 14.7847 84.3762 14.7292L84.4886 16.726C83.491 16.7822 82.4944 16.8297 81.4983 16.8686L81.4203 14.8701ZM87.3317 14.5377C88.3124 14.4658 89.2947 14.3856 90.2792 14.297L90.4585 16.2889C89.463 16.3785 88.4697 16.4596 87.4779 16.5323L87.3317 14.5377ZM93.2245 14.0077C94.2035 13.9036 95.1852 13.7912 96.17 13.6707L96.4129 15.6559C95.4177 15.7777 94.4256 15.8912 93.4361 15.9965L93.2245 14.0077ZM99.1039 13.289C100.076 13.1549 101.052 13.0131 102.033 12.8633L102.335 14.8404C101.345 14.9916 100.359 15.1349 99.377 15.2702L99.1039 13.289ZM104.962 12.3944C105.93 12.2326 106.903 12.0632 107.88 11.8862L108.236 13.8543C107.25 14.0327 106.269 14.2037 105.292 14.3671L104.962 12.3944ZM110.789 11.3403C111.755 11.1527 112.725 10.9579 113.702 10.756L114.107 12.7145C113.123 12.9181 112.144 13.1144 111.17 13.3036L110.789 11.3403ZM116.599 10.1392C117.556 9.92968 118.52 9.71335 119.489 9.49028L119.938 11.4393C118.961 11.664 117.991 11.8819 117.026 12.093L116.599 10.1392ZM122.388 8.8074C123.338 8.57837 124.295 8.343 125.258 8.1013L125.745 10.0411C124.776 10.2843 123.813 10.5212 122.856 10.7518L122.388 8.8074ZM128.135 7.36546C129.087 7.11759 130.044 6.8637 131.009 6.60381L131.529 8.53494C130.56 8.79625 129.596 9.05156 128.639 9.30088L128.135 7.36546ZM133.864 5.82254C134.815 5.55844 135.772 5.28867 136.737 5.01322L137.286 6.93632C136.317 7.21306 135.355 7.48415 134.399 7.74958L133.864 5.82254ZM139.576 4.19196C140.52 3.91525 141.472 3.63325 142.43 3.34597L143.005 5.26177C142.042 5.55022 141.087 5.83341 140.138 6.11133L139.576 4.19196Z" fill="currentColor"/>
        </svg>
    </div>

    <div class="item">
        <svg class="icon" xmlns="http://www.w3.org/2000/svg" width="32" height="32" viewBox="0 0 24 24">
            <path fill="currentColor" d="M13 7h-2v4H7v2h4v4h2v-4h4v-2h-4zm-1-5C6.48 2 2 6.48 2 12s4.48 10 10 10s10-4.48 10-10S17.52 2 12 2m0 18c-4.41 0-8-3.59-8-8s3.59-8 8-8s8 3.59 8 8s-3.59 8-8 8"/>
        </svg>
        <div class="text">
            <b>{{ _('OrderTheService') }}</b>
            <br>
            {{ _('OrderTheServiceDescription') }}
        </div>
    </div>
</div>

<menu class="nav-menu" {% if get_locale() == 'ar' %} dir="rtl" {% endif %}>
    <h2 class="title"><b>{{ _('PortalNavigation') }}</b></h2>
    <ul class="footer-links links">
        <li>
            <a href="{{ url_for('index') }}">
                {% if get_locale() == 'en' %} &#8618; {% else %} &#8617; {% endif %}
                {{ _('Home') }}:
            </a>
            {{ _('AccessEssentialServices') }}
        </li>
        <li>
            <a href="{{ url_for('departments') }}">
                {% if get_locale() == 'en' %} &#8618; {% else %} &#8617; {% endif %}
                {{ _('Departments') }}:
            </a>
            {{ _('DiscoverDepartments') }}
        </li>
        <li>
            <a href="{{ url_for('services') }}">
                {% if get_locale() == 'en' %} &#8618; {% else %} &#8617; {% endif %}
                {{ _('Services') }}:
            </a>
            {{ _('ExploreServices') }}
        </li>
        {% if session["loggedin"] == True: %}
            {% if session["is_admin"] == False %}
                <li>
                    <a href="{{ url_for('new_order') }}">
                        {% if get_locale() == 'en' %} &#8618; {% else %} &#8617; {% endif %}
                        {{ _('NewOrder') }}:
                    </a>
                    {{ _('InitiateNewOrder') }}
                </li>
                <li>
                    <a href="{{ url_for('my_orders') }}">
                        {% if get_locale() == 'en' %} &#8618; {% else %} &#8617; {% endif %}
                        {{ _('MyOrders') }}:
                    </a>
                    {{ _('ViewManageOrders') }}
                </li>
            {% elif session["is_admin"] == True %}
                <li>
                    <a href="{{ url_for('new') }}">
                        {% if get_locale() == 'en' %} &#8618; {% else %} &#8617; {% endif %}
                        {{ _('New') }}:
                    </a>
                    {{ _('AddNewDepartmentService') }}
                </li>
                <li>
                    <a href="{{ url_for('orders') }}">
                        {% if get_locale() == 'en' %} &#8618; {% else %} &#8617; {% endif %}
                        {{ _('Orders') }}:
                    </a>
                    {{ _('AccessOrders') }}
                </li>
            {% endif %}
            <li>
                <a href="{{ url_for('profile', id=session['id']) }}">
                    {% if get_locale() == 'en' %} &#8618; {% else %} &#8617; {% endif %}
                    {{ _('Profile') }}:
                </a>
                {{ _('AccessUpdateProfile') }}
            </li>
            <li>
                <a href="{{ url_for('account') }}">
                    {% if get_locale() == 'en' %} &#8618; {% else %} &#8617; {% endif %}
                    {{ _('AccountSettings') }}:
                </a>
                {{ _('CustomizeAccountSettings') }}
            </li>
        {% else: %}
            <li>
                <a href="{{ url_for('register') }}">
                    {% if get_locale() == 'en' %} &#8618; {% else %} &#8617; {% endif %}
                    {{ _('SignUp') }}:
                </a>
                {{ _('RegisterForPortal') }}
            </li>
            <li>
                <a href="{{ url_for('login') }}">
                    {% if get_locale() == 'en' %} &#8618; {% else %} &#8617; {% endif %}
                    {{ _('Login') }}:
                </a>
                {{ _('AccessAccountServices') }}
            </li>
        {% endif %}
        <li>
            <a href="{{ url_for('contact') }}">
                {% if get_locale() == 'en' %} &#8618; {% else %} &#8617; {% endif %}
                {{ _('ContactUs') }}:
            </a>
            {{ _('ReachOutSupport') }}
        </li>
    </ul>
</menu>

{% if services %}
    <div class="list_details text-rtl">
        <h2 class="list_title">{{ _('PopularServices')}}</h2>
    </div>
    <div class="wrapper">
        <ul class="cards">
            {% for service in services %}
                <a href="{{ url_for('service', id=service.id) }}">
                    <li>
                        <div class="item_title">
                            <h2>{{ service.title }}</h2>
                            {% set department = Department.query.filter_by(id=service.department_id).first() %}
                            {% if department %}
                                <h4>{{ department.title }}</h4>
                            {% endif %}
                        </div>
                        <p>{{ service.description }}</p>
                    </li>
                </a>
            {% endfor %}
        </ul>
    </div>
{% endif %}

<h2 class="now-title">{{ _('HappeningNow') }}</h2>
<div class="now-container">
    <div class="now-card">
        <h2>{{ total_orders }}</h2>
        <p>{{ _('TotalOrders') }}</p>
    </div>

    <div class="now-card">
        <h2>{{ orders_yesterday }}</h2>
        <p>{{ _('OrdersLastWeek') }}</p>
    </div>

    <div class="now-card">
        <h2>{{ total_users }}</h2>
        <p>{{ _('TotalUsers') }}</p>
    </div>

    <div class="now-card">
        <h2>{{ total_services }}</h2>
        <p>{{ _('TotalServices') }}</p>
    </div>
</div>
{% endblock %}